(window.webpackJsonp=window.webpackJsonp||[]).push([[39,41],{238:function(e,t,o){"use strict";o.d(t,"a",(function(){return x}));o(17);var n=o(3),r=o(249),c=o.n(r),l=(o(276),o(277),{apiKey:"AIzaSyCMsFreESs58-hRxTtiqQrIcimh4i1wbsM",authDomain:"postwoman-api.firebaseapp.com",databaseURL:"https://postwoman-api.firebaseio.com",projectId:"postwoman-api",storageBucket:"postwoman-api.appspot.com",messagingSenderId:"421993993223",appId:"1:421993993223:web:ec0baa8ee8c02ffa1fc6a2",measurementId:"G-ERJ6025CEB"});c.a.initializeApp(l);var d,h,f,v,m,w=c.a.firestore().collection("users"),x={currentUser:null,currentFeeds:[],currentSettings:[],currentHistory:[],currentCollections:[],currentEnvironments:[],writeFeeds:(m=Object(n.a)(regeneratorRuntime.mark((function e(t,label){var dt;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dt={createdOn:new Date,author:x.currentUser.uid,author_name:x.currentUser.displayName,author_image:x.currentUser.photoURL,message:t,label:label},w.doc(x.currentUser.uid).collection("feeds").add(dt).catch((function(e){return console.error("error inserting",dt,e)}));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),deleteFeed:function(e){w.doc(x.currentUser.uid).collection("feeds").doc(e).delete().catch((function(t){return console.error("error deleting",e,t)}))},writeSettings:(v=Object(n.a)(regeneratorRuntime.mark((function e(t,o){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={updatedOn:new Date,author:x.currentUser.uid,author_name:x.currentUser.displayName,author_image:x.currentUser.photoURL,name:t,value:o},w.doc(x.currentUser.uid).collection("settings").doc(t).set(n).catch((function(e){return console.error("error updating",n,e)}));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),writeHistory:(f=Object(n.a)(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t,w.doc(x.currentUser.uid).collection("history").add(o).catch((function(e){return console.error("error inserting",o,e)}));case 2:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),deleteHistory:function(e){w.doc(x.currentUser.uid).collection("history").doc(e.id).delete().catch((function(t){return console.error("error deleting",e,t)}))},clearHistory:function(){w.doc(x.currentUser.uid).collection("history").get().then((function(e){e.docs.forEach((function(e){return x.deleteHistory(e)}))}))},toggleStar:function(e,t){w.doc(x.currentUser.uid).collection("history").doc(e.id).update({star:t}).catch((function(t){return console.error("error deleting",e,t)}))},writeCollections:(h=Object(n.a)(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={updatedOn:new Date,author:x.currentUser.uid,author_name:x.currentUser.displayName,author_image:x.currentUser.photoURL,collection:t},w.doc(x.currentUser.uid).collection("collections").doc("sync").set(o).catch((function(e){return console.error("error updating",o,e)}));case 2:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),writeEnvironments:(d=Object(n.a)(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={updatedOn:new Date,author:x.currentUser.uid,author_name:x.currentUser.displayName,author_image:x.currentUser.photoURL,environment:t},w.doc(x.currentUser.uid).collection("environments").doc("sync").set(o).catch((function(e){return console.error("error updating",o,e)}));case 2:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})};c.a.auth().onAuthStateChanged((function(e){e?(x.currentUser=e,x.currentUser.providerData.forEach((function(e){var t={updatedOn:new Date,provider:e.providerId,name:e.displayName,email:e.email,photoUrl:e.photoURL,uid:e.uid};w.doc(x.currentUser.uid).set(t).catch((function(e){return console.error("error updating",t,e)}))})),w.doc(x.currentUser.uid).collection("feeds").orderBy("createdOn","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){var o=e.data();o.id=e.id,t.push(o)})),x.currentFeeds=t})),w.doc(x.currentUser.uid).collection("settings").onSnapshot((function(e){var t=[];e.forEach((function(e){var o=e.data();o.id=e.id,t.push(o)})),x.currentSettings=t})),w.doc(x.currentUser.uid).collection("history").onSnapshot((function(e){var t=[];e.forEach((function(e){var o=e.data();o.id=e.id,t.push(o)})),x.currentHistory=t})),w.doc(x.currentUser.uid).collection("collections").onSnapshot((function(e){var t=[];e.forEach((function(e){var o=e.data();o.id=e.id,t.push(o)})),t.length>0&&(x.currentCollections=t[0].collection)})),w.doc(x.currentUser.uid).collection("environments").onSnapshot((function(e){var t=[];e.forEach((function(e){var o=e.data();o.id=e.id,t.push(o)})),t.length>0&&(x.currentEnvironments=t[0].environment)}))):x.currentUser=null}))},242:function(e,t,o){"use strict";var n=o(5),r=o(38),c=o(43),l=o(101),d=o(73),h=o(19),f=o(62).f,v=o(75).f,m=o(18).f,w=o(267).trim,x=n.Number,_=x,C=x.prototype,I="Number"==c(o(74)(C)),y="trim"in String.prototype,E=function(e){var t=d(e,!1);if("string"==typeof t&&t.length>2){var o,n,r,c=(t=y?t.trim():w(t,3)).charCodeAt(0);if(43===c||45===c){if(88===(o=t.charCodeAt(2))||120===o)return NaN}else if(48===c){switch(t.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+t}for(var code,l=t.slice(2),i=0,h=l.length;i<h;i++)if((code=l.charCodeAt(i))<48||code>r)return NaN;return parseInt(l,n)}}return+t};if(!x(" 0o1")||!x("0b1")||x("+0x1")){x=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof x&&(I?h((function(){C.valueOf.call(o)})):"Number"!=c(o))?l(new _(E(t)),o,x):E(t)};for(var M,F=o(12)?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),R=0;F.length>R;R++)r(_,M=F[R])&&!r(x,M)&&m(x,M,v(_,M));x.prototype=C,C.constructor=x,o(20)(n,"Number",x)}},258:function(e,t,o){var content=o(317);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(47).default)("087ee5d0",content,!0,{sourceMap:!1})},259:function(e,t,o){var content=o(319);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(47).default)("709d1904",content,!0,{sourceMap:!1})},267:function(e,t,o){var n=o(8),r=o(44),c=o(19),l=o(268),d="["+l+"]",h=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),v=function(e,t,o){var r={},d=c((function(){return!!l[e]()||"​"!="​"[e]()})),h=r[e]=d?t(m):l[e];o&&(r[o]=h),n(n.P+n.F*d,"String",r)},m=v.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(h,"")),2&t&&(e=e.replace(f,"")),e};e.exports=v},268:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},316:function(e,t,o){"use strict";var n=o(258);o.n(n).a},317:function(e,t,o){(t=o(46)(!1)).push([e.i,"ul[data-v-fe98c654]{flex-direction:column}ul[data-v-fe98c654],ul li[data-v-fe98c654]{display:flex}ul li[data-v-fe98c654]{margin-left:32px;border-left:1px solid var(--brd-color)}",""]),e.exports=t},318:function(e,t,o){"use strict";var n=o(259);o.n(n).a},319:function(e,t,o){(t=o(46)(!1)).push([e.i,".virtual-list[data-v-63ab3b54]{max-height:calc(100vh - 245px)}ul[data-v-63ab3b54]{display:flex;flex-direction:column}",""]),e.exports=t},896:function(e,t,o){"use strict";o.r(t);o(17);var n=o(3),r=(o(242),o(238)),c={components:{folder:function(){return o.e(46).then(o.bind(null,924))},request:function(){return o.e(23).then(o.bind(null,917))}},props:{collectionIndex:Number,collection:Object,doc:Boolean},data:function(){return{showChildren:!1,selectedFolder:{}}},methods:{syncCollections:function(){null!==r.a.currentUser&&r.a.currentSettings[0].value&&r.a.writeCollections(JSON.parse(JSON.stringify(this.$store.state.postwoman.collections)))},toggleShowChildren:function(){this.showChildren=!this.showChildren},removeCollection:function(){confirm("Are you sure you want to remove this Collection?")&&(this.$store.commit("postwoman/removeCollection",{collectionIndex:this.collectionIndex}),this.syncCollections())},editFolder:function(e,t,o){this.$emit("edit-folder",{collectionIndex:e,folder:t,folderIndex:o})}}},l=(o(316),o(42)),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"flex-wrap"},[o("button",{staticClass:"icon",on:{click:e.toggleShowChildren}},[o("i",{directives:[{name:"show",rawName:"v-show",value:!e.showChildren,expression:"!showChildren"}],staticClass:"material-icons"},[e._v("arrow_right")]),e._v(" "),o("i",{directives:[{name:"show",rawName:"v-show",value:e.showChildren,expression:"showChildren"}],staticClass:"material-icons"},[e._v("arrow_drop_down")]),e._v(" "),o("i",{staticClass:"material-icons"},[e._v("folder")]),e._v(" "),o("span",[e._v(e._s(e.collection.name))])]),e._v(" "),o("div",[e.doc?o("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.$t("import"),expression:"$t('import')",modifiers:{left:!0}}],staticClass:"icon",on:{click:function(t){return e.$emit("select-collection")}}},[o("i",{staticClass:"material-icons"},[e._v("topic")])]):e._e(),e._v(" "),o("v-popover",[o("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:e.$t("more"),expression:"$t('more')",modifiers:{left:!0}}],staticClass:"tooltip-target icon"},[o("i",{staticClass:"material-icons"},[e._v("more_vert")])]),e._v(" "),o("template",{slot:"popover"},[o("div",[o("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",on:{click:function(t){return e.$emit("add-folder")}}},[o("i",{staticClass:"material-icons"},[e._v("create_new_folder")]),e._v(" "),o("span",[e._v(e._s(e.$t("new_folder")))])])]),e._v(" "),o("div",[o("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",on:{click:function(t){return e.$emit("edit-collection")}}},[o("i",{staticClass:"material-icons"},[e._v("create")]),e._v(" "),o("span",[e._v(e._s(e.$t("edit")))])])]),e._v(" "),o("div",[o("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",on:{click:e.removeCollection}},[o("i",{staticClass:"material-icons"},[e._v("delete")]),e._v(" "),o("span",[e._v(e._s(e.$t("delete")))])])])])],2)],1)]),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.showChildren,expression:"showChildren"}]},[o("ul",[e._l(e.collection.folders,(function(t,n){return o("li",{key:t.name},[o("folder",{attrs:{folder:t,folderIndex:n,"collection-index":e.collectionIndex,doc:e.doc},on:{"edit-folder":function(o){return e.editFolder(e.collectionIndex,t,n)},"edit-request":function(t){return e.$emit("edit-request",t)}}})],1)})),e._v(" "),0===e.collection.folders.length&&0===e.collection.requests.length?o("li",[o("label",[e._v(e._s(e.$t("collection_empty")))])]):e._e()],2),e._v(" "),o("ul",e._l(e.collection.requests,(function(t,n){return o("li",{key:n},[o("request",{attrs:{request:t,"collection-index":e.collectionIndex,"folder-index":-1,"request-index":n,doc:e.doc},on:{"edit-request":function(o){return e.$emit("edit-request",{request:t,collectionIndex:e.collectionIndex,folderIndex:void 0,requestIndex:n})}}})],1)})),0)])])}),[],!1,null,"fe98c654",null).exports,h={components:{collection:d,"pw-section":function(){return o.e(1).then(o.bind(null,366))},addCollection:function(){return o.e(62).then(o.bind(null,936))},addFolder:function(){return o.e(63).then(o.bind(null,934))},editCollection:function(){return o.e(64).then(o.bind(null,933))},editFolder:function(){return o.e(65).then(o.bind(null,935))},editRequest:function(){return o.e(66).then(o.bind(null,937))},importExportCollections:function(){return o.e(67).then(o.bind(null,943))}},props:{doc:Boolean},data:function(){return{showModalAdd:!1,showModalEdit:!1,showModalImportExport:!1,showModalAddFolder:!1,showModalEditFolder:!1,showModalEditRequest:!1,editingCollection:void 0,editingCollectionIndex:void 0,editingFolder:void 0,editingFolderIndex:void 0,editingRequest:void 0,editingRequestIndex:void 0}},computed:{collections:function(){return null!==r.a.currentUser?r.a.currentCollections:this.$store.state.postwoman.collections}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e._keyListener=function(e){"Escape"===e.key&&(e.preventDefault(),this.showModalAdd=this.showModalEdit=this.showModalImportExport=this.showModalAddFolder=this.showModalEditFolder=this.showModalEditRequest=!1)},document.addEventListener("keydown",e._keyListener.bind(e));case 2:case"end":return t.stop()}}),t)})))()},methods:{displayModalAdd:function(e){this.showModalAdd=e},displayModalEdit:function(e){this.showModalEdit=e,e||this.resetSelectedData()},displayModalImportExport:function(e){this.showModalImportExport=e},displayModalAddFolder:function(e){this.showModalAddFolder=e,e||this.resetSelectedData()},displayModalEditFolder:function(e){this.showModalEditFolder=e,e||this.resetSelectedData()},displayModalEditRequest:function(e){this.showModalEditRequest=e,e||this.resetSelectedData()},editCollection:function(e,t){this.$data.editingCollection=e,this.$data.editingCollectionIndex=t,this.displayModalEdit(!0),this.syncCollections()},addFolder:function(e,t){this.$data.editingCollection=e,this.$data.editingCollectionIndex=t,this.displayModalAddFolder(!0),this.syncCollections()},editFolder:function(e){var t=e.collectionIndex,o=e.folder,n=e.folderIndex;this.$data.editingCollection=d,this.$data.editingCollectionIndex=t,this.$data.editingFolder=o,this.$data.editingFolderIndex=n,this.displayModalEditFolder(!0),this.syncCollections()},editRequest:function(e){var t=e.request,o=e.collectionIndex,n=e.folderIndex,r=e.requestIndex;this.$data.editingCollectionIndex=o,this.$data.editingFolderIndex=n,this.$data.editingRequest=t,this.$data.editingRequestIndex=r,this.displayModalEditRequest(!0),this.syncCollections()},resetSelectedData:function(){this.$data.editingCollection=void 0,this.$data.editingCollectionIndex=void 0,this.$data.editingFolder=void 0,this.$data.editingFolderIndex=void 0,this.$data.editingRequest=void 0,this.$data.editingRequestIndex=void 0},syncCollections:function(){null!==r.a.currentUser&&r.a.currentSettings[0].value&&r.a.writeCollections(JSON.parse(JSON.stringify(this.$store.state.postwoman.collections)))}},beforeDestroy:function(){document.removeEventListener("keydown",this._keyListener)}},f=(o(318),Object(l.a)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("pw-section",{ref:"collections",staticClass:"yellow",attrs:{label:e.$t("collections")}},[o("addCollection",{attrs:{show:e.showModalAdd},on:{"hide-modal":function(t){return e.displayModalAdd(!1)}}}),e._v(" "),o("editCollection",{attrs:{show:e.showModalEdit,editingCollection:e.editingCollection,editingCollectionIndex:e.editingCollectionIndex},on:{"hide-modal":function(t){return e.displayModalEdit(!1)}}}),e._v(" "),o("addFolder",{attrs:{show:e.showModalAddFolder,collection:e.editingCollection,collectionIndex:e.editingCollectionIndex},on:{"hide-modal":function(t){return e.displayModalAddFolder(!1)}}}),e._v(" "),o("editFolder",{attrs:{show:e.showModalEditFolder,collection:e.editingCollection,collectionIndex:e.editingCollectionIndex,folder:e.editingFolder,folderIndex:e.editingFolderIndex},on:{"hide-modal":function(t){return e.displayModalEditFolder(!1)}}}),e._v(" "),o("editRequest",{attrs:{show:e.showModalEditRequest,collectionIndex:e.editingCollectionIndex,folderIndex:e.editingFolderIndex,request:e.editingRequest,requestIndex:e.editingRequestIndex},on:{"hide-modal":function(t){return e.displayModalEditRequest(!1)}}}),e._v(" "),o("importExportCollections",{attrs:{show:e.showModalImportExport},on:{"hide-modal":function(t){return e.displayModalImportExport(!1)}}}),e._v(" "),o("div",{staticClass:"flex-wrap"},[o("div",[o("button",{staticClass:"icon",on:{click:function(t){return e.displayModalAdd(!0)}}},[o("i",{staticClass:"material-icons"},[e._v("add")]),e._v(" "),o("span",[e._v(e._s(e.$t("new")))])])]),e._v(" "),o("div",[o("button",{staticClass:"icon",on:{click:function(t){return e.displayModalImportExport(!0)}}},[e._v("\n        "+e._s(e.$t("import_export"))+"\n      ")])])]),e._v(" "),0===e.collections.length?o("p",{staticClass:"info"},[o("i",{staticClass:"material-icons"},[e._v("help_outline")]),e._v(" Create new collection\n  ")]):e._e(),e._v(" "),o("div",{staticClass:"virtual-list"},[o("ul",e._l(e.collections,(function(t,n){return o("li",{key:t.name},[o("collection",{attrs:{"collection-index":n,collection:t,doc:e.doc},on:{"edit-collection":function(o){return e.editCollection(t,n)},"add-folder":function(o){return e.addFolder(t,n)},"edit-folder":function(t){return e.editFolder(t)},"edit-request":function(t){return e.editRequest(t)},"select-collection":function(o){return e.$emit("use-collection",t)}}})],1)})),0)])],1)}),[],!1,null,"63ab3b54",null));t.default=f.exports}}]);